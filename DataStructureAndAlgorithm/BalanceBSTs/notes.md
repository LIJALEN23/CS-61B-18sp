# Balance Binary Search Trees(平衡二叉树)
## 平衡二叉树的基本概念
- 概念：平衡二叉树（Balanced Binary Tree）是一种二叉搜索树（Binary Search Tree, BST）的特例，它通过特定的规则保持树的左右子树高度差不超过某个固定的值，从而避免出现极端不平衡的情况。
- 思想：
  1. **二叉搜索树（BST）的性质：**
      - 在一棵二叉搜索树中，对于每个节点，其左子树中的所有节点的值都小于该节点的值，而右子树中的所有节点的值都大于该节点的值。

  2. **平衡二叉树的定义：**
      - 平衡二叉树是一棵空树或者具有以下性质的二叉搜索树：
          - 其左子树和右子树都是平衡二叉树。
          - 左右子树的高度差（平衡因子）不超过1。

  3. **平衡因子（Balance Factor）：**
      - 对于一个节点，其平衡因子定义为其左子树的高度减去其右子树的高度（或者右子树的高度减去左子树的高度）。平衡因子的范围通常为{-1, 0, 1}，这意味着任何时刻，一个节点的左右子树高度之差不会超过1。

  4. **保持平衡的操作：**
      - 在进行插入或者删除操作后，可能会破坏平衡二叉树的平衡性。为了恢复平衡，需要通过旋转（Rotation）操作来调整树的结构。常见的旋转操作包括左旋（Left Rotation）和右旋（Right Rotation），它们可以通过改变节点之间的连接关系来保持或者恢复树的平衡。

  5. **性能特征：**
      - 平衡二叉树的插入、删除和查找操作的平均时间复杂度为O(log n)，其中n为树中节点的数量。这种性能保证了在动态插入和删除操作频繁的情况下，树的性能仍然能够保持在较高水平。
     
总结来说，平衡二叉树通过保持树的平衡性，使得在插入和删除节点时能够保持较低的时间复杂度，是一种在动态数据结构中非常有用的数据结构。

## 分类
- 经典的两种实现
  - AVL树
  - 红黑树
  - 区别
      1. **旋转次数不同：**
      - **AVL树：** 它是一种严格的平衡树，任何节点的两棵子树的高度差不超过1。因此，插入和删除节点时，可能需要进行更多的旋转操作来恢复平衡，这可能会导致性能略低于红黑树。
      - **红黑树：** 它是一种更为宽松的平衡树，通过牺牲严格的高度平衡来换取平衡维护操作的简单性。红黑树保证任何节点的黑色高度（从节点到叶子的黑色节点数）差不超过两倍。因此，相对于AVL树，它在插入和删除节点时需要更少的旋转操作。

      2. **节点结构不同：**
          - **AVL树：** 每个节点存储一个平衡因子（Balance Factor），用来表示左子树高度和右子树高度的差，通常为-1、0、+1。
          - **红黑树：** 每个节点除了存储数据外，还存储一个颜色信息（通常是红色或黑色），通过颜色来实现平衡。

      3. **应用场景不同：**
          - **AVL树：** 适合用于读操作频繁的场景，因为它提供了严格的平衡性，查询时复杂度更加稳定。
          - **红黑树：** 在插入和删除操作较多且查询操作相对较少的场景中表现较好，因为它在维护平衡时性能略优于AVL树。
- 其他
  - Splay树
  - Treap
  - AA树
  - 替罪羊树(Scapegoat tree)

## AVL树
### 插入操作
1. 普通插入
2. 更新节点高度
3. 计算节点平衡因子
4. 根据平衡因子进行相应旋转

### 删除操作
1. 普通删除
2. 更新节点高度
3. 计算节点平衡因子
4. 根据平衡因子进行相应旋转

### 旋转操作
两种旋转：
- 左旋
- 右旋

四种失衡情况：
1. LL型：右旋
2. LR型：左旋左孩子，然后右旋
3. RR型：左旋
4. RL型：右旋右孩子，然后左旋


## 红黑树
### 基本概念
- 红黑树的基本概念：自平衡二叉查找树，它在插入和删除操作的时候通过颜色和旋转操作来保持树的平衡
- 性质：
  - 每个节点要么是红色，要么是黑色
  - 根节点是黑色
  - 每个叶子节点是黑色
  - 如果一个节点是红色，则它的两个子节点都是黑色(即不存在两个连续的红色节点)
  - 从任一节点到每个叶子节点的所有路径都包含相同数目的黑色节点

### 基本操作
#### 插入操作
  - 新插入的节点总是红色的
  - 插入可能会破坏红黑树的性质，需要通过重新着色和旋转来恢复性质

调整策略
  - 插入节点是根节点：直接变黑
  - 插入节点的叔叔是红色：叔父变色，爷爷变成插入节点
  - 插入节点的叔叔是黑色：(LL,RR,RL,LR)旋转，然后变色


- 删除
  - 删除节点可能会破坏红黑树的性质，需要通过重新着色和旋转来恢复性质
- 旋转
  - 左旋转和右旋转是维持红黑树平衡的基本操作
  - 左旋转和右旋转是在不改变BST性质的前提下对树的结构进行调整，使树重新满足红黑树的性质